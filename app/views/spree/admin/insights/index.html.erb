<% content_for :page_title do %>
  <%= Spree.t(:heading, type: params[:type].to_s.titleize, scope: :insight) %>
<% end %>

<% content_for :title do %>
  <%= Spree.t(:heading, type: params[:type].to_s.titleize, scope: :insight) %>
<% end %>

<div id='insights-div' class='container-fluid' >
  <div class="row">
    <%= select_tag :reports, options_for_select(@reports.map { |report_name| [report_name.to_s.humanize, report_name, data: { url: admin_insight_url(report_name, type: params[:type]) }] }.unshift(['Select a report', '', data: { url: admin_insights_url(type: params[:type]) }]), @report_name || ''), class: 'select2' %>
  </div>
</div>
<%= content_tag :div, class: 'hidden report-data', data: { report_data: @report_data_json } {} %>

<div id='report-container'>
  <div id='search-div' class='hide'>
    <div class="filter-wrap row">
      <div class="col-sm-12">
        <div class="input-group index-filter-button">
          <span class="input-group-btn">
            <button class="btn btn-default js-show-index-filters" type="button">
              <span class="icon icon-chevron-right"></span>
              <%= Spree.t(:filter) %>
            </button>
          </span>
          <%= form_tag form_action(@report_name, params[:type]), id: "quick-search" do %>
            <%= text_field_tag :quick_search, nil, class: "form-control js-quick-search", placeholder: Spree.t(:quick_search) %>
          <% end %>
        </div>
        <div id="table-filter" data-hook class="well filter-well">
        </div>
      </div>
    </div>

    <div class="table-active-filters js-filters"></div>
  </div>

  <div id="page-selector" class="col-md-1 pull-right hide">
    <%= select_tag :per_page, options_for_select([5, 15, 30, 45, 60], params[:per_page] || 5), class: 'form-control pull-right' %>
  </div>


  <div id='report-div'>
  </div>

  <div id='paginator-div'>
  </div>
</div>

<%= render partial: 'spree/admin/templates/insights/show', formats: [:template] %>
<%= render partial: 'spree/admin/templates/insights/paginator', formats: [:template] %>
<%= render partial: 'spree/admin/templates/insights/search', formats: [:template] %>
